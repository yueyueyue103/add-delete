import React, { useState, useEffect } from 'react';
import './c2.css'; // Import CSS file

const TextArea = () => {
  const [selectedOption, setSelectedOption] = useState('');
  const [userInput, setUserInput] = useState('');
  const [selectedA, setSelectedA] = useState('');
  const [isError, setIsError] = useState(false); // New state variable for error handling

  useEffect(() => {
    setSelectedA(data[0]?.件名 || '');
  }, []);

  const handleSelectChange = (e) => {
    const selectedOption = e.target.value;
    setSelectedOption(selectedOption);

    const selectedAValue = data.find((item) => item.テンプレート名 === selectedOption)?.件名 || '';
    setUserInput(selectedAValue);
  };

  const handleTextAreaChange = (e) => {
    const inputValue = e.target.value;
    
    // 检查输入文本的长度是否超过 100 个字符
    if (inputValue.length <= 100) {
      setUserInput(inputValue);
    }
  };

  const handleSubmit = () => {
    if (userInput.trim() === '') {
      setIsError(true);
    } else {
      setIsError(false);
      console.log('提交内容:', userInput);
    }
  };

  const data = [
    {
      テンプレート名: 'テンプレート名1',
      件名: '件名1',
    },
    {
      テンプレート名: 'テンプレート名2',
      件名: '件名2',
    },
    {
      テンプレート名: 'テンプレート名3',
      件名: '件名3',
    },
    {
      テンプレート名: 'テンプレート名4',
      件名: '件名4',
    },
  ];

  return (
    <div>
      <label>{selectedA}</label>
      <select className="container" value={selectedOption} onChange={handleSelectChange}>
        <option value=""></option>
        {data.map((item) => (
          <option key={item.テンプレート名} value={item.テンプレート名}>
            {item.テンプレート名}
          </option>
        ))}
      </select>

      <textarea className="textarea" value={userInput} onChange={handleTextAreaChange} />
      {isError && <p style={{ color: 'red' }}>输入不能为空！</p >} {/* Display error message */}
      <br /><br /><br /><br /><br />
      <button onClick={handleSubmit}>提交</button>
    </div>
  );
};

export default TextArea;
